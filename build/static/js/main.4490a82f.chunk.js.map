{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","App.js","index.js"],"names":["baseUrl","getAll","axios","get","then","res","data","newObject","post","id","put","console","log","delete","Filter","value","handleFilterChange","onChange","e","PersonForm","name","number","handleNameChange","handleNumberChange","handleSubmit","onSubmit","type","Persons","phonebook","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","message","setMessage","errorMessage","setErrorMessage","useEffect","personService","people","p","indexOf","map","key","onClick","window","confirm","returnedPeople","setTimeout","catch","err","target","className","preventDefault","personObj","foundPerson","find","undefined","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4490a82f.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst baseUrl = '/api/phonebook';\r\n\r\n  const getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(res => res.data);\r\n  }\r\n  \r\n  const create = newObject => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then(res => res.data);\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then(res => {\r\n        console.log(res);\r\n        return res.data\r\n    });\r\n  }\r\n\r\n  const remove = (id) => {\r\n      const request = axios.delete(`${baseUrl}/${id}`);\r\n      return request.then(res => {\r\n            console.log(res);\r\n            return getAll();\r\n        });\r\n  }\r\n  \r\n  export default { getAll, create, update, remove }","import React, { useState } from 'react';\r\n\r\nconst Filter = ({ value, handleFilterChange }) => {\r\n    return(\r\n        <form>\r\n            <div>\r\n            filter shown with: <input value={value} onChange={e => handleFilterChange(e)} />\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = ({ name, number, handleNameChange, handleNumberChange, handleSubmit }) => {\r\n    return(\r\n        <form onSubmit={e => handleSubmit(e)}>\r\n            <div>\r\n            name: <input value={name} onChange={e => handleNameChange(e)} />\r\n            </div>\r\n            <div>\r\n            number: <input value={number} onChange={e => handleNumberChange(e)} />\r\n            </div>\r\n            <div>\r\n            <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Persons = ({ phonebook }) => {\r\n    return(\r\n        <ul>\r\n          {phonebook}\r\n        </ul>\r\n    );\r\n}\r\n\r\nexport default Persons;","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport './styles/App.css';\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]); \n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [message, setMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const handleNameChange = e => setNewName(e.target.value);\n  const handleNumberChange = e => setNewNumber(e.target.value);\n  const handleFilterChange = e => setFilter(e.target.value);\n\n  useEffect(() => {\n    personService.getAll()\n                  .then(people => {\n                    setPersons(people)\n                  })\n  }, [])\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const personObj = { name: newName, number: newNumber};\n    const foundPerson = persons.find(p => p.name === newName);\n    if(foundPerson === undefined){\n      personService.create(personObj)\n                    .then(returnedPerson => {\n                      setPersons(persons.concat(returnedPerson));\n                      setMessage(`${newName} added to the phonebook!`);\n                      setNewName('');\n                      setNewNumber('');\n\n                      setTimeout(() => {\n                        setMessage(null)\n                      }, 5000)\n\n                    })\n    }\n    else{\n      if(window.confirm(`${newName} already exists. Do you want to update his/her information?`)){\n        personService.update(foundPerson.id, personObj)\n                      .then(returnedPerson => {\n                        console.log(returnedPerson);\n                        setPersons(persons.map(p => {\n                          return (p.name === newName ? personObj : p)\n                        }));\n                        setMessage(`${newName} info was updated!`);\n                        setNewName('');\n                        setNewNumber('');\n\n                        setTimeout(() => {\n                          setMessage(null)\n                        }, 5000)\n\n                      })\n                      .catch(err => {\n                        setErrorMessage(`This person was already removed from the server...`)\n                        \n                        setTimeout(() => {\n                          setErrorMessage(null)\n                        }, 5000)\n  \n                        setPersons(persons.filter(p => p.id !== foundPerson.id))\n                      });\n      }\n    }\n  }\n\n  const handleDelete = id => {\n    if(window.confirm(\"Do you really want to delete?\")){\n      personService.remove(id)\n                    .then(returnedPeople => {\n                      console.log(returnedPeople);\n                      setPersons(returnedPeople);\n                      setMessage(`Person deleted!`);\n\n                      setTimeout(() => {\n                        setMessage(null)\n                      }, 5000)\n\n                    })\n                    .catch(err => {\n                      setErrorMessage(`This person was already removed from the server...`)\n                      \n                      setTimeout(() => {\n                        setErrorMessage(null)\n                      }, 5000)\n\n                      setPersons(persons.filter(p => p.id !== id))\n                    });\n    }\n  }\n\n  let phonebookFiltered = persons.filter(p => p.name.indexOf(filter) > -1);\n  let phonebook = phonebookFiltered.map(p => <li key={p.name}>{p.name} {p.number}<button onClick={() => handleDelete(p.id)}>delete</button></li>);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n        <Filter value={filter} handleFilterChange={handleFilterChange}/>\n\n        {message === null ? <div></div> : <div className=\"success\">{message}</div>}\n        {errorMessage === null ? <div></div> : <div className=\"error\">{errorMessage}</div>}\n\n      <h2>Add a new</h2>\n        <PersonForm name={newName} number={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} handleSubmit={handleSubmit} />\n      <h2>Numbers</h2>\n        <Persons phonebook={phonebook}/>\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}